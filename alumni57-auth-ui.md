# Авторизация выпускников 57 - интерфейс

## Главный экран

### Что это?

Это простая система, с помощью которой выпускники 57-й школы помогут другу другу получить код вида

> lyc-1817g-pusha-834012543123

Его можно указывать при голосованиях, чтобы ваш голос не пришлось перепроверять.

### Ваш код

> 57-1990v-romf-3434343313414  
Романенко Федор, 1990В  
(пригласил Марков Николай, 2001Я)

Важно!  
Если вы не он, то вы не можете пользоваться этой страницей, приглашать знакомых или голосовать этим кодом за другого. Если это случится, то после небольшого разбирательства нам придется сказать ай-ай-ай и все аннулировать.

[ Создать собственный код ]  
- стоит, если вы готовы его записать и не забыть, а также не хотите, чтобы к вам подглядывали

### Другие приглашения

57-1990v-romf-1940348930498 (пригласил Тилипман Антон, 1990В) (отключить)  

- отключите код, чтобы с его помощью никто не мог голосовать и приглашать других от вашего имени

Код [ ............ ] [Добавить]  
- добавьте другие приглашения, чтобы все точно знали, что вы - это вы.

### Пригласите знакомых

Помогите знакомым выпускникам поскорее получить код!

[ ............. ]  [ Пригласить ]  
- укажите имя, год выпуска и класс выпускника

(если выпускник не нашелся в списке, пишите подробности нам на auth.alumni57@gmail.com, разберемся!)

## Главный экран без кода

### Что это?

 *(аналогично)*

### У меня есть код

[ ............... ] [ Проверить код ]

### Где взять код?

* попросите у друзей-выпускников прислать вам приглашение личным секретным сообщением
* если у вас нет друзей или у друзей нет кода, не грустите, подождите и попробуйте еще раз
* если ничего не получилось, напишите побольше о себе на auth.alumni57@gmail.com

## Приглашение выпускника

> Меня зовут  
Романенко Федор, 1990В

Я хочу пригласить моего знакомого выпускника

> Алексеев Юра, 1990В

получить вот этот код, который позволит ему участвовать в голосованиях

> 57-1990v-aleyu-987341223423423

Важно!

* нельзя приглашать от имени другого человека
* вы можете воспользоваться любым каналом связи: почтой, sms, сообщениями Facebook или ВКонтакте, продиктовать по телефону
* убедитесь, что код получит именно тот самый выпускник, которого вы решили пригласить. В этом ваша ответственность
* не пользуйтесь открытыми каналами связи для передачи кодов и ссылок, не публикуйте их в соцсетях
* если вы будете невнимательны или сыграете не по правилам, увы, нам придется все это аннулировать и отключить

### Выберите текст сообщения

[
> http://auth.alumni57.ru/57-1990v-aleyu-987341223423423  - здесь твой код для голосования выпускников 57-й

]

[
> Привет!  
Твой код для голосований выпускников 57-й  
57-1990v-aleyu-987341223423423  
Подробности есть на сайте  
http://auth.alumni57.ru

]

## Комментарии по реализации:

* направленный граф строится именно по кодам, а не выпускникам. При этом коды ссылаются на выпускников
* у главной страницы всегда есть параметр "код", если нет, то рисуем формочку с предложением его ввести, после ввода редиректим на главную страницу с параметром
* мы видим приглашения, которые инициировал кто-то с кодом, а не все приглашения выпускника
* при добавлении других приглашений проверяется соответствие выпускника из базы
* набор кодов, которые были добавлены к основному, или выпущены для себя, имеют общие права доступа. Однако, в параметре и заголовке страницы указан всегда один, от имени которого происходят последующие действия
* флажок "отключить" лежит в таблице кодов, им может управлять только "получатель", т.е. тот, на кого выписали код.
* если код отключен, то можно написать, на кого он был выписан и кем, но ничего больше увидеть и сделать нельзя
* страница с "приглашением" выпускнику имеет урл `/invite/57-1990v-aleyu-987341223423423`, открывается в новом окне. На нее можно перейти по ссылке из списка высланных приглашений.
* у стрелки invite_links есть флажки `is_invited`, `is_merged`, `is_self_issued`
